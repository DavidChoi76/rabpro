{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Basic example\n",
    "\n",
    "This example demonstrates some of the core functionality and export features provided by rabpro.\n",
    "\n",
    "Note: you will need to download HydroBasins to run this demo. See [this notebook](https://github.com/VeinsOfTheEarth/rabpro/blob/main/docs/source/examples/notebooks/downloading_data.ipynb) for download instructions."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import geopandas as gpd\n",
    "import rabpro\n",
    "from matplotlib import pyplot as plt"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "First, we need to specify a point for which we'd like a watershed delineated."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "coords = (56.22659, -130.87974)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now we can initialize the profiler. The rabpro profiler is the main entry point into the package - it provides wrapper funcitons for most of the rabpro's core functionality.\n",
    "\n",
    "Note that we can optionally specify a drainage area (`da`) or set `force_merit` to `True`, to ensure that we use MERIT data rather than HydroBasins to perform basin delineation."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\318596\\Anaconda3\\envs\\erosion\\lib\\site-packages\\geopandas\\geodataframe.py:34: ShapelyDeprecationWarning: The array interface is deprecated and will no longer work in Shapely 2.0. Convert the '.coords' to a numpy array instead.\n",
      "  out = from_shapely(data)\n"
     ]
    }
   ],
   "source": [
    "rpo = rabpro.profiler(coords, name='basic_test', rebuild_vrts=False)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "rabpro can now compute the watershed for this point. Since we are not providing a pre-known drainage area to the profiler or specifying `force_merit=True`, rabpro will use HydroBasins to delineate the watershed. Delineation may take a minute or two as rabpro has to identify the correct level-12 HydroBasins shapefile and load it into memory (these files are >100MB)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [],
   "source": [
    "%%capture\n",
    "rpo.delineate_basin()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The basin geometry is stored in a GeoPandas GeoDataFrame, and can be accessed through the `rpo` object."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\318596\\Anaconda3\\envs\\erosion\\lib\\site-packages\\descartes\\patch.py:62: ShapelyDeprecationWarning: The array interface is deprecated and will no longer work in Shapely 2.0. Convert the '.coords' to a numpy array instead.\n",
      "  vertices = concatenate([\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "<AxesSubplot:>"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "rpo.watershed.plot()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Next, we try to compute the river elevation profile. This will fail because we have not yet downloaded MERIT data."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Extracting flowpath from DEM...\n",
      "Cannot map provided point to a flowline; unable to extract centerline. Reason #5\n"
     ]
    }
   ],
   "source": [
    "rpo.elev_profile(dist_to_walk_km=5)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "If you'd like to complete this task, you will need to download the MERIT tile `n30w150`. Detailed instructions, including how to get a username and password for MERIT-Hydro downloads, are [here](https://github.com/VeinsOfTheEarth/rabpro/blob/main/docs/source/examples/notebooks/downloading_data.ipynb). Note that the MERIT tile will consume ~1.6 GB of space when unzipped.\n",
    "\n",
    "`download_merit_hydro()` will automatically rebuild virtual rasters, which are how rabpro interacts with the individual geotiffs, after downloading a tile."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Downloading 'http://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_Hydro/distribute/v1.0/dir_n30w150.tar' into 'C:\\Users\\318596\\AppData\\Local\\rabpro\\rabpro\\MERIT_Hydro\\MERIT_FDR\\dir_n30w150.tar'\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████| 72.0M/72.0M [00:09<00:00, 7.31MB/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Downloading 'http://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_Hydro/distribute/v1.0/elv_n30w150.tar' into 'C:\\Users\\318596\\AppData\\Local\\rabpro\\rabpro\\MERIT_Hydro\\MERIT_ELEV_HP\\elv_n30w150.tar'\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|███████████████████████████████████████████████████████████████████████████████| 866M/866M [01:34<00:00, 9.16MB/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Downloading 'http://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_Hydro/distribute/v1.0/upa_n30w150.tar' into 'C:\\Users\\318596\\AppData\\Local\\rabpro\\rabpro\\MERIT_Hydro\\MERIT_UDA\\upa_n30w150.tar'\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|███████████████████████████████████████████████████████████████████████████████| 502M/502M [01:11<00:00, 7.02MB/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Downloading 'http://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_Hydro/distribute/v1.0/wth_n30w150.tar' into 'C:\\Users\\318596\\AppData\\Local\\rabpro\\rabpro\\MERIT_Hydro\\MERIT_WTH\\wth_n30w150.tar'\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████| 25.3M/25.3M [00:10<00:00, 2.33MB/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Building flow direction virtual raster DEM from MERIT tiles...\n",
      "0...10...20...30...40...50...60...70...80...90...100 - done.\n",
      "\n",
      "Building drainage areas virtual raster DEM from MERIT tiles...\n",
      "0...10...20...30...40...50...60...70...80...90...100 - done.\n",
      "\n",
      "Building hydrologically-processed elevations virtual raster DEM from MERIT tiles...\n",
      "0...10...20...30...40...50...60...70...80...90...100 - done.\n",
      "\n",
      "Building width virtual raster from MERIT tiles...\n",
      "0...10...20...30...40...50...60...70...80...90...100 - done.\n",
      "\n"
     ]
    }
   ],
   "source": [
    "from rabpro import data_utils\n",
    "data_utils.download_merit_hydro('n30w150', username=hidden, password=hidden, proxy='user@proxy:port')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now we can try again:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Extracting flowpath from DEM...\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\318596\\Anaconda3\\envs\\erosion\\lib\\site-packages\\pandas\\core\\dtypes\\cast.py:118: ShapelyDeprecationWarning: The array interface is deprecated and will no longer work in Shapely 2.0. Convert the '.coords' to a numpy array instead.\n",
      "  arr = construct_1d_object_array_from_listlike(values)\n",
      "C:\\Users\\318596\\Anaconda3\\envs\\erosion\\lib\\site-packages\\geopandas\\geodataframe.py:34: ShapelyDeprecationWarning: The array interface is deprecated and will no longer work in Shapely 2.0. Convert the '.coords' to a numpy array instead.\n",
      "  out = from_shapely(data)\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "Text(0, 0.5, 'Elevation')"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "rpo.elev_profile(dist_to_walk_km=5)\n",
    "plt.plot(rpo.flowline['Distance (m)'], rpo.flowline['Elevation (m)'])\n",
    "plt.xlabel('Along-stream distance, m')\n",
    "plt.ylabel('Elevation')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The along-stream distance is with respect to the provided coordinate. You can use the `rpo.flowline` GeoDataFrame to compute slopes."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "You can export the `watershed` GeoDataFrame and/or the `flowline` GeoDataFrame using the `.export()` method."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [],
   "source": [
    "%%capture\n",
    "rpo.export(\"all\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Once the subbasins are delinated, rabpro can use Google Earth Engine (GEE) to compute statistics for each subbasin. Using Google Earth Engine reduces the need to store large datasets locally, and speeds up computation by using GEE's parallel distributed computing capabilities.\n",
    "\n",
    "Note: In order to use rabpro for basin statistics, you'll need to sign up for a GEE account. See rabpro's documentation for more information."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Submitting basin stats task to GEE for JRC/GSW1_3/GlobalSurfaceWater...\n"
     ]
    }
   ],
   "source": [
    "# Specify which statistics to calculate for the JRC/GSW1_3/GlobalSurfaceWater dataset's occurrence band\n",
    "statlist = ['min', 'max', 'range', 'std', 'sum', 'pct50', 'pct3']\n",
    "data = rabpro.basin_stats.Dataset(\"JRC/GSW1_3/GlobalSurfaceWater\", \"occurrence\", stats=statlist)\n",
    "\n",
    "d, t = rpo.basin_stats([data], folder=\"rabpro test\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The output data will be placed in the `rabpro test` folder in your Google Drive if it already exists. If not, GEE will create a new `rabpro test` folder at the root level of your Drive.\n",
    "\n",
    "`basin_stats` returns a url to the resulting csv data which can be read directly with `pandas`:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>system:index</th>\n",
       "      <th>count</th>\n",
       "      <th>da_km2</th>\n",
       "      <th>max</th>\n",
       "      <th>mean</th>\n",
       "      <th>min</th>\n",
       "      <th>p3</th>\n",
       "      <th>p50</th>\n",
       "      <th>range</th>\n",
       "      <th>sum</th>\n",
       "      <th>.geo</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0_0</td>\n",
       "      <td>91173</td>\n",
       "      <td>2131.577825</td>\n",
       "      <td>100</td>\n",
       "      <td>80.523354</td>\n",
       "      <td>0</td>\n",
       "      <td>22.328632</td>\n",
       "      <td>91.636754</td>\n",
       "      <td>100</td>\n",
       "      <td>4.757363e+06</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "  system:index  count       da_km2  max       mean  min         p3        p50  \\\n",
       "0          0_0  91173  2131.577825  100  80.523354    0  22.328632  91.636754   \n",
       "\n",
       "   range           sum  .geo  \n",
       "0    100  4.757363e+06   NaN  "
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "pd.read_csv(d[0])"
   ]
  }
 ],
 "metadata": {
  "interpreter": {
   "hash": "00bb43fee90ca6224738cf9c10f6fc0369c1e3ba4a3fdb37a7afd215dae0b1f5"
  },
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
